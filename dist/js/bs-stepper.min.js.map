{"version":3,"file":"bs-stepper.min.js","sources":["../../src/js/polyfill.js","../../src/js/util.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["let matches = window.Element.prototype.matches\r\nlet closest = (element, selector) => element.closest(selector)\r\nlet WinEvent = (inType, params) => new window.Event(inType, params)\r\n\r\n/* istanbul ignore next */\r\nfunction polyfill () {\r\n  if (!window.Element.prototype.matches) {\r\n    matches = window.Element.prototype.msMatchesSelector ||\r\n      window.Element.prototype.webkitMatchesSelector\r\n  }\r\n\r\n  if (!window.Element.prototype.closest) {\r\n    closest = (element, selector) => {\r\n      if (!document.documentElement.contains(element)) {\r\n        return null\r\n      }\r\n\r\n      do {\r\n        if (matches.call(element, selector)) {\r\n          return element\r\n        }\r\n\r\n        element = element.parentElement || element.parentNode\r\n      } while (element !== null && element.nodeType === 1)\r\n\r\n      return null\r\n    }\r\n  }\r\n\r\n  if (!window.Event || typeof window.Event !== 'function') {\r\n    WinEvent = (inType, params) => {\r\n      params = params || {}\r\n      const e = document.createEvent('Event')\r\n      e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable))\r\n      return e\r\n    }\r\n  }\r\n}\r\n\r\npolyfill()\r\n\r\nexport {\r\n  closest,\r\n  WinEvent\r\n}\r\n","import { WinEvent, closest } from './polyfill'\r\n\r\nconst MILLISECONDS_MULTIPLIER = 1000\r\nconst Selectors = {\r\n  STEPS: '.step',\r\n  TRIGGER: '.step-trigger, a',\r\n  STEPPER: '.bs-stepper'\r\n}\r\n\r\nconst ClassName = {\r\n  ACTIVE: 'active',\r\n  LINEAR: 'linear',\r\n  BLOCK: 'dstepper-block',\r\n  NONE: 'dstepper-none',\r\n  FADE: 'fade'\r\n}\r\n\r\nconst transitionEndEvent = 'transitionend'\r\nconst customProperty = 'bsStepper'\r\n\r\nconst showStep = (step, stepList) => {\r\n  if (step.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const stepperNode = closest(step, Selectors.STEPPER)\r\n  const activeStep = stepList.filter(step => step.classList.contains(ClassName.ACTIVE))\r\n  if (activeStep.length) {\r\n    activeStep[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n  stepList.forEach(step => {\r\n    const trigger = step.querySelector(Selectors.TRIGGER)\r\n    trigger.setAttribute('aria-selected', 'false')\r\n    // if stepper is in linear mode, set disabled attribute on the trigger\r\n    if (stepperNode.classList.contains(ClassName.LINEAR)) {\r\n      trigger.setAttribute('disabled', 'disabled')\r\n    }\r\n  })\r\n\r\n  step.classList.add(ClassName.ACTIVE)\r\n  const currentTrigger = step.querySelector(Selectors.TRIGGER)\r\n  currentTrigger.setAttribute('aria-selected', 'true')\r\n  // if stepper is in linear mode, remove disabled attribute on current\r\n  if (stepperNode.classList.contains(ClassName.LINEAR)) {\r\n    currentTrigger.removeAttribute('disabled')\r\n  }\r\n}\r\n\r\nconst showContent = (content, contentList) => {\r\n  if (content.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  function complete () {\r\n    content.classList.add(ClassName.BLOCK)\r\n    content.removeEventListener(transitionEndEvent, complete)\r\n  }\r\n\r\n  const activeContent = contentList.filter(content => content.classList.contains(ClassName.ACTIVE))\r\n  if (activeContent.length) {\r\n    activeContent[0].classList.remove(ClassName.ACTIVE)\r\n    activeContent[0].classList.remove(ClassName.BLOCK)\r\n  }\r\n\r\n  if (content.classList.contains(ClassName.FADE)) {\r\n    content.classList.remove(ClassName.NONE)\r\n    const duration = getTransitionDurationFromElement(content)\r\n    content.addEventListener(transitionEndEvent, complete)\r\n    if (activeContent.length) {\r\n      activeContent[0].classList.add(ClassName.NONE)\r\n    }\r\n\r\n    content.classList.add(ClassName.ACTIVE)\r\n    emulateTransitionEnd(content, duration)\r\n  } else {\r\n    content.classList.add(ClassName.ACTIVE)\r\n  }\r\n}\r\n\r\nconst getTransitionDurationFromElement = element => {\r\n  if (!element) {\r\n    return 0\r\n  }\r\n\r\n  // Get transition-duration of the element\r\n  let transitionDuration = window.getComputedStyle(element).transitionDuration\r\n  const floatTransitionDuration = parseFloat(transitionDuration)\r\n\r\n  // Return 0 if element or transition duration is not found\r\n  if (!floatTransitionDuration) {\r\n    return 0\r\n  }\r\n\r\n  // If multiple durations are defined, take the first\r\n  transitionDuration = transitionDuration.split(',')[0]\r\n\r\n  return parseFloat(transitionDuration) * MILLISECONDS_MULTIPLIER\r\n}\r\n\r\nconst emulateTransitionEnd = (element, duration) => {\r\n  let called = false\r\n  const durationPadding = 5\r\n  const emulatedDuration = duration + durationPadding\r\n  function listener () {\r\n    called = true\r\n    element.removeEventListener(transitionEndEvent, listener)\r\n  }\r\n\r\n  element.addEventListener(transitionEndEvent, listener)\r\n  window.setTimeout(() => {\r\n    if (!called) {\r\n      element.dispatchEvent(WinEvent(transitionEndEvent))\r\n    }\r\n\r\n    element.removeEventListener(transitionEndEvent, listener)\r\n  }, emulatedDuration)\r\n}\r\n\r\nconst detectAnimation = (contentList, animation) => {\r\n  if (animation) {\r\n    contentList.forEach(content => {\r\n      content.classList.add(ClassName.FADE)\r\n      content.classList.add(ClassName.NONE)\r\n    })\r\n  }\r\n}\r\n\r\nexport {\r\n  showContent,\r\n  showStep,\r\n  Selectors,\r\n  ClassName,\r\n  customProperty,\r\n  detectAnimation\r\n}\r\n","import { closest } from './polyfill'\r\nimport { Selectors, customProperty, showStep, showContent } from './util'\r\n\r\nfunction clickStepLinearListener (event) {\r\n  event.preventDefault()\r\n}\r\n\r\nfunction clickStepNonLinearListener (event) {\r\n  event.preventDefault()\r\n\r\n  const step = closest(event.target, Selectors.STEPS)\r\n  const stepperNode = closest(step, Selectors.STEPPER)\r\n  const stepper = stepperNode[customProperty]\r\n\r\n  const stepIndex = stepper._steps.indexOf(step)\r\n  stepper._currentIndex = stepIndex\r\n  showStep(step, stepper._steps)\r\n  showContent(stepper._stepsContents[stepIndex], stepper._stepsContents)\r\n}\r\n\r\nexport {\r\n  clickStepLinearListener,\r\n  clickStepNonLinearListener\r\n}\r\n","import { showContent, showStep, Selectors, ClassName, customProperty, detectAnimation } from './util'\r\nimport { clickStepLinearListener, clickStepNonLinearListener } from './listeners'\r\n\r\nconst DEFAULT_OPTIONS = {\r\n  linear: true,\r\n  animation: false\r\n}\r\n\r\nclass Stepper {\r\n  constructor (element, _options = {}) {\r\n    this._element = element\r\n    this._currentIndex = 0\r\n    this._stepsContents = []\r\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\r\n      .filter(step => step.hasAttribute('data-target'))\r\n\r\n    this._steps.forEach(step => {\r\n      this._stepsContents.push(\r\n        this._element.querySelector(step.getAttribute('data-target'))\r\n      )\r\n    })\r\n\r\n    this.options = {\r\n      ...DEFAULT_OPTIONS,\r\n      ..._options\r\n    }\r\n\r\n    if (this.options.linear) {\r\n      this._element.classList.add(ClassName.LINEAR)\r\n    }\r\n\r\n    detectAnimation(this._stepsContents, this.options.animation)\r\n    if (this._steps.length) {\r\n      showStep(this._steps[this._currentIndex], this._steps)\r\n      showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n    }\r\n\r\n    this._setLinkListeners()\r\n    Object.defineProperty(this._element, customProperty, {\r\n      value: this,\r\n      writable: true\r\n    })\r\n  }\r\n\r\n  // Private\r\n\r\n  _setLinkListeners () {\r\n    this._steps.forEach(step => {\r\n      const trigger = step.querySelector(Selectors.TRIGGER)\r\n      if (this.options.linear) {\r\n        trigger.addEventListener('click', clickStepLinearListener)\r\n      } else {\r\n        trigger.addEventListener('click', clickStepNonLinearListener)\r\n      }\r\n    })\r\n  }\r\n\r\n  // Public\r\n\r\n  next () {\r\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : (this._steps.length - 1)\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  previous () {\r\n    this._currentIndex = (this._currentIndex - 1) >= 0 ? this._currentIndex - 1 : 0\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  reset () {\r\n    this._currentIndex = 0\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  destroy () {\r\n    this._steps.forEach(step => {\r\n      const trigger = step.querySelector(Selectors.TRIGGER)\r\n      if (this.options.linear) {\r\n        trigger.removeEventListener('click', clickStepLinearListener)\r\n      } else {\r\n        trigger.removeEventListener('click', clickStepNonLinearListener)\r\n      }\r\n    })\r\n\r\n    this._element[customProperty] = undefined\r\n    this._element = undefined\r\n    this._currentIndex = undefined\r\n    this._steps = undefined\r\n    this._stepsContents = undefined\r\n  }\r\n}\r\n\r\nexport default Stepper\r\n"],"names":["matches","window","Element","prototype","closest","element","selector","WinEvent","inType","params","Event","msMatchesSelector","webkitMatchesSelector","document","documentElement","contains","call","parentElement","parentNode","nodeType","e","createEvent","initEvent","Boolean","bubbles","cancelable","Selectors","ClassName","transitionEndEvent","customProperty","showStep","step","stepList","classList","stepperNode","activeStep","filter","length","remove","forEach","trigger","querySelector","setAttribute","add","currentTrigger","removeAttribute","showContent","content","contentList","activeContent","duration","getTransitionDurationFromElement","addEventListener","complete","removeEventListener","emulateTransitionEnd","transitionDuration","getComputedStyle","parseFloat","split","called","emulatedDuration","listener","setTimeout","dispatchEvent","clickStepLinearListener","event","preventDefault","clickStepNonLinearListener","target","stepper","stepIndex","_steps","indexOf","_currentIndex","_stepsContents","DEFAULT_OPTIONS","linear","animation","_options","_element","slice","this","querySelectorAll","hasAttribute","_this","push","getAttribute","options","_setLinkListeners","Object","defineProperty","value","writable","_this2","next","previous","reset","destroy","_this3","undefined"],"mappings":"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"}